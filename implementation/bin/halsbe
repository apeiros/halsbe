#!/usr/bin/env ruby
$LOAD_PATH.unshift(File.expand_path(File.dirname(__FILE__)+'/../lib'))

require 'halsbe/parser'
require 'halsbe/walker'
require 'halsbe/core'
require 'pp'

include Halsbe
abort("Usage: halsbe executefile") unless ARGV.last and File.exist?(ARGV.last)
parser = Parser.parse_file(ARGV.pop)

#puts "AST:"
#pp parser.ast
#puts

#puts "Tokens:"
#data = parser.data
#puts parser.tokens.map { |t| "%s(%p)"%[t.class, t.data(data)] }
#puts

Walker.new(parser.ast, Core).run
